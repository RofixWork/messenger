(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{15:function(e,t,a){e.exports=a(31)},20:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(13),l=a.n(s),c=(a(20),a(14)),i=a(8),m=a(5),o=a.n(m);o.a.initializeApp({apiKey:"AIzaSyC1zDOuibCZ32RFzbenioleXVTfASJMfOY",authDomain:"messenger-5154d.firebaseapp.com",databaseURL:"https://messenger-5154d.firebaseio.com",projectId:"messenger-5154d",storageBucket:"messenger-5154d.appspot.com",messagingSenderId:"30662737678",appId:"1:30662737678:web:dcef958d8045fe65a0215f",measurementId:"G-HH1675PB70"});var u=o.a.auth(),d=o.a.firestore(),g=r.a.createContext(),f=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),s=a[0],l=a[1],m=Object(n.useState)(!0),f=Object(i.a)(m,2),p=f[0],E=f[1],b=Object(n.useState)([]),v=Object(i.a)(b,2),h=v[0],N=v[1];return Object(n.useEffect)((function(){u.onAuthStateChanged((function(e){l(e),E(!1)})),d.collection("messages").orderBy("currentTime","desc").onSnapshot((function(e){N(e.docs.map((function(e){return Object(c.a)({id:e.id},e.data())})))}))}),[]),console.log(s),r.a.createElement(g.Provider,{value:{register:function(){var e=new o.a.auth.GoogleAuthProvider;o.a.auth().signInWithPopup(e).then((function(t){o.a.auth().signInWithRedirect(e)}))},user:s,loader:p,logout:function(){u.signOut().then(l(null)).catch((function(e){return console.log(e)}))},sendMsg:function(e){d.collection("messages").add({msg:e,username:s.displayName,photo:s.photoURL,email:s.email,currentTime:o.a.firestore.FieldValue.serverTimestamp()})},allMsg:h}},e.children)},p=function(){var e=r.a.useContext(g),t=e.register,a=e.user,n=e.loader,s=e.logout,l=function(){t()},c=function(){s()},i=function(){return!n&&a?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement("img",{className:"img__user mr-3",src:a.photoURL,alt:"image user"}))),r.a.createElement("li",null,r.a.createElement("button",{onClick:c,className:"btnWebOne"},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("button",{onClick:l,className:"btnWebOne"},"Register with google")))};return r.a.createElement("div",{className:"navbar__nav fixed-top"},r.a.createElement("div",{className:"container d-flex align-items-center"},r.a.createElement("div",{className:"navbar__logo flex-grow-1"},"mesenger"),r.a.createElement("ul",{className:"navbar_links list-unstyled flex-grow-1 text-right"},n?"....":r.a.createElement(i,null))))},E=function(){var e=r.a.useContext(g).sendMsg,t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fixed-bottom form_input"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(s),l("")}},r.a.createElement("input",{type:"text",className:"form-control shadow-none rounded-0",placeholder:"Enter Message...",value:s,onChange:function(e){return l(e.target.value)},required:!0}))))},b=function(){var e=r.a.useContext(g),t=e.allMsg,a=e.user;return r.a.createElement("div",{className:"messages "},r.a.createElement(r.a.Fragment,null,t.map((function(e){return e.email===a.email?r.a.createElement("div",{key:e.id,className:"messages_container2 d-flex justify-content-end"},r.a.createElement("div",{className:"messages_content2"},r.a.createElement("p",{className:"messages_content2_msg text-right"},e.msg))):r.a.createElement("div",{key:e.id,className:"messages_container d-flex "},r.a.createElement("div",{className:"messages_img"},r.a.createElement("img",{src:e.photo,alt:"img user"})),r.a.createElement("div",{className:"messages_msg"},r.a.createElement("span",{className:"font-weight-bold messages_msg_name"},e.username),r.a.createElement("p",{className:"mb-0 messages_msg_content"},e.msg)))}))),r.a.createElement(E,null))},v=function(){return r.a.createElement("div",{className:"welcome"},r.a.createElement("h2",null,"Welcome to Messenger"),r.a.createElement("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nulla porro quidem sapiente quisquam facere nobis, quasi provident aut, fuga enim cupiditate quam incidunt tenetur aperiam. Reprehenderit, eligendi animi. Nesciunt deleniti tempore distinctio nisi fugiat labore facere incidunt soluta laudantium tenetur."))},h=function(){var e=Object(n.useContext)(g),t=e.loader,a=e.user;return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"container"},!t&&a?r.a.createElement(b,null):r.a.createElement(v,null)))};var N=function(){return r.a.createElement(f,null,r.a.createElement(p,null),r.a.createElement(h,null))};l.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.04a3f000.chunk.js.map